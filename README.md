# FastAPI 実践ワークショップ

このリポジトリは、Python の Web フレームワークである FastAPI を使い、簡単な Web アプリケーションを構築するための実践的な問題集です。
各ステップの未完成のコードを完成させて、アプリケーションを段階的に構築していきましょう。

## 🎯 このプロジェクトの目的

バックエンド開発に必要な以下のサイクルを実践的に学びます。

- Python の基本的なデータ構造を理解する。
- FastAPI で API サーバーを構築する。
- GET/POST リクエストを処理する。
- Jinja2 テンプレートエンジンを使い、動的に HTML を生成する。

---

## 🚀 セットアップと実行方法

0. **作業用ファイルを用意**

任意の場所に作業用ファイルを作成してください。
ここでは `c:\work\practice` フォルダとします。

ターミナルで以下を実行してから作業を開始してください。

```bash
    git clone <このリポジトリのURL> //gitからリポジトリのクローンをpracticeファイル直下に作成
    cd <リポジトリ名> //作成したクローンファイルに移動
```

1.  **リポジトリをクローン**

    ```bash
    git clone <このリポジトリのURL> //gitからリポジトリのクローンをpracticeファイル直下に作成
    cd <リポジトリ名> //作成したクローンファイルに移動
    ```

2.  **仮想環境の作成と有効化**

    ```bash
    # 仮想環境を作成
    python -m venv .venv
    # 仮想環境を有効化 (Windows)
    .venv\Scripts\activate
    # 仮想環境を有効化 (macOS/Linux)
    source .venv/bin/activate
    ```

3.  **依存ライブラリのインストール**
    ```bash
    pip install -r requirements.txt
    ```

---

## 📚 学習ステップの概要

このプロジェクトは、以下のステップで構成されています。詳細はソースコード内のコメントも参照してください。

### Step 1: Python のデータ構造

目標: Python のリストと辞書を使い、ユーザーデータの構造を作成します。

step-1`/data_exercise.py` ファイルを開いてください。

` --- ここにコードを書いてください ---` の部分に、2 人分のユーザー情報を持つ辞書を users リストに追加するコードを記述してください。

ターミナルで python step-1`/data_exercise.py` を実行し、ユーザーリストが正しく表示されることを確認してください。

### Step 2: 最初の FastAPI サーバー

目標: FastAPI で最もシンプルな Web サーバーを起動します。

step-2/server_exercise.py ファイルを開いてください。

` --- ここにコードを書いてください --- `の部分に、ルート URL(/)への GET リクエストを処理するエンドポイントを追加してください。このエンドポイントは `{"Hello": "World"} `という JSON を返すようにします。

ターミナルで `uvicorn step2.server_exercise:app --reload` を実行し、ブラウザで `http://127.0.0.1:8000` にアクセスして` {"Hello": "World"} `が表示されることを確認してください。

### Step 3: API からデータを返す

課題 1 で作成したユーザーデータを返す API エンドポイントを作成します。

step-3`/api_exercise.py` ファイルを開いてください。

` --- ここにコードを書いてください --- `の部分に、`/api/users` という URL への GET リクエストを処理する新しいエンドポイントを追加してください。このエンドポイントは、users リストをそのまま返します。

ターミナルで `uvicorn step3.api_exercise:app --reload` を実行し、ブラウザで `http://127.0.0.1:8000/api/users` にアクセスして、ユーザーデータの JSON が表示されることを確認してください。

### Step 4: テンプレートを使ってページを表示する

Jinja2 テンプレートを使い、ユーザーデータを HTML ページに表示します。

step4-1/template_exercise.py ファイルを開き、` --- Python のコードをここに書いてください --- `の部分を完成させてください。`/users-page` という URL にアクセスがあったときに、users.html テンプレートに必要なデータを渡して表示する処理を記述します。

step4-2`/templates/users.html` ファイルを開き、` --- ここにコードをここに書いてください --- ` の部分を完成させてください。Jinja2のforループを使い、渡された`users`リストの情報を元に、ユーザー名とメールアドレスを ```<li>``` タグで表示する処理を記述します。

ターミナルで `uvicorn step4.template_exercise:app --reload` を実行し、`http://127.0.0.1:8000/users-page` にアクセスして、ユーザー一覧が箇条書きで表示されることを確認してください。

### Step 5: フォームからのデータ投稿 (最終課題)

フォームからの POST リクエストを処理し、インタラクティブな掲示板を完成させます。

step5-1`/templates/guestbook.html` を開き、` --- ここにコードをここに書いてください --- ` の部分に名前とコメントを/add という URL に POST する HTML フォームを記述してください。

step5-2`/main.py` を開き、` --- POST リクエストを処理するコードをここに書いてください ---` の部分を完成させてください。/add への POST リクエストを受け取り、送信されたフォームデータを comments リストに追加し、トップページにリダイレクトする処理を記述します。

step5-3 `cd step5`でstep5のフォルダに移動します。
`python main.py` でサーバーを起動し、`http://127.0.0.1:8000/` にアクセスします。フォームからコメントを投稿し、それがページ下部の一覧に追加されることを確認してください。



### 回答の確認
すべての問題の回答を収めたフォルダを `anser` フォルダに用意しています。

`cd anser`でanserフォルダに移動します。
`python main.py`を実行して正しいページを確認してください。
